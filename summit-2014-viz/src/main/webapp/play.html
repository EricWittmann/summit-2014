<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Red Hat Summit Demo 2014">

    <title>Red Hat Summit Demo 2014</title>

    <link href="lib/bootstrap-3.1.1/css/bootstrap.min.css" rel="stylesheet" media="screen"></link>
    <link href="css/demo.css" rel="stylesheet" media="screen"></link>

    <script type="text/javascript" src="lib/jquery-1.10.2/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="lib/bootstrap-3.1.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="lib/d3-3.4.3/js/d3.min.js"></script>
    <script type="text/javascript" src="js/visualization.js"></script>
    <script type="text/javascript" src="app/app.nocache.js"></script>
  </head>

  <body>
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>

    <!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Red Hat Summit Keynote Demo 2014</a>
        </div>
      </div>
    </div>

    <div class="container content">
      <div class="row">
        <button id="play" class="btn btn-primary">Play Demo</button> &nbsp;
      </div>
      <div class="row graph">
      </div>
    </div> <!-- /container -->

    <script>
      var data = {
              "name": "root",
              "type" : "root",
              "children": [
                {
                  "name": "compute1",
                  "type" : "profile",
                  "children": [
                               { "name": "gear-1", "type" : "gear", "size" : 12, "active" : true },
                               { "name": "gear-2", "type" : "gear", "size" : 12, "active" : false }
                  ]
                },
                {
                  "name": "compute2",
                  "type" : "profile",
                  "children": [
                               { "name": "gear-1", "type" : "gear", "size" : 12, "active" : false },
                               { "name": "gear-2", "type" : "gear", "size" : 12, "active" : false }
                  ]
                }
              ]
            };
      var compute3 = {
              "name": "compute3",
              "type" : "profile",
              "children": [
                           { "name": "gear-1", "type" : "gear", "size" : 12, "active" : false },
                           { "name": "gear-2", "type" : "gear", "size" : 12, "active" : false },
                           { "name": "gear-3", "type" : "gear", "size" : 12, "active" : false },
                           { "name": "gear-4", "type" : "gear", "size" : 12, "active" : false }
              ]
      };
      var compute4 = {
              "name": "compute4",
              "type" : "profile",
              "children": [
                           { "name": "gear-1", "type" : "gear", "size" : 12, "active" : false },
                           { "name": "gear-2", "type" : "gear", "size" : 12, "active" : false },
                           { "name": "gear-3", "type" : "gear", "size" : 12, "active" : false },
                           { "name": "gear-4", "type" : "gear", "size" : 12, "active" : false }
              ]
      };
      
      // Add compute3
      function demo_step2() {
          data.children.push(compute3);
          update(data);
          window.setTimeout(demo_step3, 5000);
      }
      // Add compute4
      function demo_step3() {
          data.children.push(compute4);
          update(data);
          window.setTimeout(demo_step4, 5000);
      }
      // Activate 3-1
      function demo_step4() {
    	  activateGear(data.children[2].children[0].id);
          window.setTimeout(demo_step5, 3000);
      }
      // Activate 3-2
      function demo_step5() {
          activateGear(data.children[2].children[1].id);
          window.setTimeout(demo_step6, 3000);
      }
      // Activate 3-3
      function demo_step6() {
          activateGear(data.children[2].children[2].id);
          window.setTimeout(demo_step7, 3000);
      }
      // Activate 4-1
      function demo_step7() {
          activateGear(data.children[3].children[0].id);
          window.setTimeout(demo_step8, 3000);
      }
      // Activate 4-2
      function demo_step8() {
          activateGear(data.children[3].children[1].id);
          window.setTimeout(demo_step9, 3000);
      }
      // Activate 4-3
      function demo_step9() {
          activateGear(data.children[3].children[2].id);
          window.setTimeout(demo_step10, 3000);
      }
      // Activate 4-4
      function demo_step10() {
          activateGear(data.children[3].children[3].id);
          window.setTimeout(demo_step11, 6000);
      }
      // Remove compute2
      function demo_step11() {
    	  data.children.splice(1, 1);
    	  update(data);
      }
      
      $(document).ready(function() {
    	  update(data);
          $('#play').click(function() {
        	  demo_step2();
          });
      });
    </script>
    
  </body>
</html>
